function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"5k4T":function(t,e,n){"use strict";n.r(e),n.d(e,"SearchModule",(function(){return F}));var o,a,i=n("sMZv"),c=n("ofXK"),s=n("0IaG"),r=n("fXoL"),l=(n("QmST"),n("bTqV")),u=((o=function(){function t(e){_classCallCheck(this,t),this.book=e}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||o)(r.Ob(s.a))},o.\u0275cmp=r.Ib({type:o,selectors:[["ng-component"]],decls:13,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content","",2,"overflow","hidden"],[1,"row"],[1,"col-auto"],[3,"src"],[1,"col"],["mat-dialog-actions",""],["mat-button","",3,"mat-dialog-close"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(t,e){1&t&&(r.Ub(0,"h1",0),r.xc(1),r.Tb(),r.Ub(2,"div",1),r.Ub(3,"div",2),r.Ub(4,"div",3),r.Pb(5,"img",4),r.Tb(),r.Ub(6,"div",5),r.xc(7),r.Tb(),r.Tb(),r.Tb(),r.Ub(8,"div",6),r.Ub(9,"button",7),r.xc(10,"Close"),r.Tb(),r.Ub(11,"button",8),r.xc(12," Add to wishlist "),r.Tb(),r.Tb()),2&t&&(r.Cb(1),r.yc(e.book.title),r.Cb(4),r.lc("src",e.book.thumbnailUrl,r.rc),r.Cb(2),r.yc(e.book.description),r.Cb(2),r.lc("mat-dialog-close",!1),r.Cb(2),r.lc("mat-dialog-close",!0))},directives:[s.g,s.e,s.c,l.a,s.d],styles:[""]}),o),b=n("kt0X"),p=n("SJAo"),h=Object(b.o)(p.b),d=Object(b.q)(h,(function(t){return t.loading})),f=Object(b.q)(h,(function(t){return t.books})),g=Object(b.q)(h,(function(t){return t.totalItems})),m=Object(b.q)(h,(function(t){return t.lastQuery})),C=n("+Pp2"),k=n("fcPU"),v=n("d7F/"),w=n("1G5W"),y=n("XNiG"),I=n("xgIS"),O=n("lJxs"),T=n("kmnG"),$=n("qFsG"),U=["input"],P=((a=function(){function t(){_classCallCheck(this,t),this.inputChange=new r.o}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){var t=this;Object(I.a)(this.inputEl.nativeElement,"input").pipe(Object(O.a)((function(e){t.inputChange.emit(t.inputEl.nativeElement.value)}))).subscribe((function(){}))}},{key:"ngOnDestroy",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Ib({type:a,selectors:[["app-books-search-input"]],viewQuery:function(t,e){var n;1&t&&r.Bc(U,!0),2&t&&r.nc(n=r.dc())&&(e.inputEl=n.first)},outputs:{inputChange:"inputChange"},decls:3,vars:0,consts:[["matInput","","placeholder","Search books"],["input",""]],template:function(t,e){1&t&&(r.Ub(0,"mat-form-field"),r.Pb(1,"input",0,1),r.Tb())},directives:[T.c,$.a],styles:[""]}),a),_=n("+0xr"),x=n("M9IT"),S=n("Xa2L"),j=["paginator"];function M(t,e){1&t&&(r.Ub(0,"th",10),r.xc(1,"Title"),r.Tb())}function D(t,e){if(1&t&&(r.Ub(0,"td",11),r.xc(1),r.Tb()),2&t){var n=e.$implicit;r.Cb(1),r.yc(n.title)}}function z(t,e){1&t&&r.Pb(0,"tr",12)}function q(t,e){if(1&t){var n=r.Vb();r.Ub(0,"tr",13),r.cc("click",(function(){r.qc(n);var t=e.$implicit;return r.gc().rowClicked.emit(t)})),r.Tb()}}function R(t,e){1&t&&(r.Ub(0,"div",14),r.Pb(1,"mat-progress-spinner",15),r.Tb())}var E,Q,X,B,G=((Q=function(){function t(){_classCallCheck(this,t),this.pageChange=new r.o,this.rowClicked=new r.o,this.totalItems=0,this.columns=["title"],this.pageSize=20,this.destroy$=new y.a}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.totalItems$.pipe(Object(w.a)(this.destroy$)).subscribe((function(e){t.paginator&&t.paginator.firstPage(),t.totalItems=e}))}},{key:"onPaginateChange",value:function(t){this.pageChange.emit({pageIndex:t.pageIndex,pageSize:t.pageSize})}},{key:"ngOnDestroy",value:function(){this.destroy$.next()}}]),t}()).\u0275fac=function(t){return new(t||Q)},Q.\u0275cmp=r.Ib({type:Q,selectors:[["app-books-table"]],viewQuery:function(t,e){var n;1&t&&r.Bc(j,!0),2&t&&r.nc(n=r.dc())&&(e.paginator=n.first)},inputs:{books$:"books$",totalItems$:"totalItems$",loading$:"loading$"},outputs:{pageChange:"pageChange",rowClicked:"rowClicked"},decls:12,vars:10,consts:[["div","",1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","title"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable-row","mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","page"],["paginator",""],["class","center-spinner",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",1,"clickable-row",3,"click"],[1,"center-spinner"],["diameter","50","mode","indeterminate"]],template:function(t,e){1&t&&(r.Ub(0,"div",0),r.Ub(1,"table",1),r.hc(2,"async"),r.Sb(3,2),r.wc(4,M,2,0,"th",3),r.wc(5,D,2,1,"td",4),r.Rb(),r.wc(6,z,1,0,"tr",5),r.wc(7,q,1,0,"tr",6),r.Tb(),r.Ub(8,"mat-paginator",7,8),r.cc("page",(function(t){return e.onPaginateChange(t)})),r.Tb(),r.wc(10,R,2,0,"div",9),r.hc(11,"async"),r.Tb()),2&t&&(r.Cb(1),r.lc("dataSource",r.ic(2,6,e.books$)),r.Cb(5),r.lc("matHeaderRowDef",e.columns),r.Cb(1),r.lc("matRowDefColumns",e.columns),r.Cb(1),r.lc("length",e.totalItems)("pageSize",e.pageSize),r.Cb(2),r.lc("ngIf",r.ic(11,8,e.loading$)))},directives:[_.j,_.c,_.e,_.b,_.g,_.i,x.a,c.k,_.d,_.a,_.f,_.h,S.a],pipes:[c.b],styles:[".clickable-row[_ngcontent-%COMP%]:hover{background-color:#e3e3e3;cursor:pointer}.mat-cell[_ngcontent-%COMP%], .mat-footer-row[_ngcontent-%COMP%], .mat-header-cell[_ngcontent-%COMP%], .mat-header-row[_ngcontent-%COMP%], .mat-row[_ngcontent-%COMP%]{display:inline-flex;min-width:100%;height:1.7em}.mat-table[_ngcontent-%COMP%]{max-height:40vh;display:block;overflow:auto}.mat-header-row[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:0;z-index:100}.center-spinner[_ngcontent-%COMP%]{background:hsla(0,0%,100%,.377);position:absolute;top:50%;left:50%;transform:translateX(-50%) translateY(-50%)}"]}),Q),H=((E=function(){function t(e,n){_classCallCheck(this,t),this.store=e,this.dialog=n,this.destroy$=new y.a}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.username$=this.store.select(k.c),this.loading$=this.store.select(d),this.books$=this.store.select(f),this.totalItems$=this.store.select(g),this.store.pipe(Object(b.t)(m),Object(w.a)(this.destroy$)).subscribe((function(e){t.lastQuery=e}))}},{key:"onSearchInputChanged",value:function(t){this.searchBooks(t,0)}},{key:"onPageChange",value:function(t){this.searchBooks(this.lastQuery,t.pageIndex*t.pageSize)}},{key:"searchBooks",value:function(t,e){this.store.dispatch(Object(C.a)({query:t,startIndex:e}))}},{key:"onRowClicked",value:function(t){var e=this;this.dialog.open(u,{data:t,width:"450px",maxHeight:"450px"}).afterClosed().subscribe((function(n){n&&e.store.dispatch(Object(v.a)({book:t}))}))}},{key:"ngOnDestroy",value:function(){this.destroy$.next()}}]),t}()).\u0275fac=function(t){return new(t||E)(r.Ob(b.h),r.Ob(s.b))},E.\u0275cmp=r.Ib({type:E,selectors:[["app-search"]],decls:12,vars:6,consts:[[1,"container"],[1,"row"],[1,"col","text-center"],[1,"col"],[3,"inputChange"],[1,"row","mt-5"],[3,"books$","loading$","totalItems$","pageChange","rowClicked"]],template:function(t,e){1&t&&(r.Ub(0,"div",0),r.Ub(1,"div",1),r.Ub(2,"div",2),r.Ub(3,"h1"),r.xc(4),r.hc(5,"async"),r.Tb(),r.Tb(),r.Tb(),r.Ub(6,"div",1),r.Ub(7,"div",3),r.Ub(8,"app-books-search-input",4),r.cc("inputChange",(function(t){return e.onSearchInputChanged(t)})),r.Tb(),r.Tb(),r.Tb(),r.Ub(9,"div",5),r.Ub(10,"div",3),r.Ub(11,"app-books-table",6),r.cc("pageChange",(function(t){return e.onPageChange(t)}))("rowClicked",(function(t){return e.onRowClicked(t)})),r.Tb(),r.Tb(),r.Tb(),r.Tb()),2&t&&(r.Cb(4),r.zc("Welcome ",r.ic(5,4,e.username$),""),r.Cb(7),r.lc("books$",e.books$)("loading$",e.loading$)("totalItems$",e.totalItems$))},directives:[P,G],pipes:[c.b],styles:[""],changeDetection:0}),E),J=n("tyNb"),L=[{path:"",component:H}],A=((B=function t(){_classCallCheck(this,t)}).\u0275mod=r.Mb({type:B}),B.\u0275inj=r.Lb({factory:function(t){return new(t||B)},imports:[[J.d.forChild(L)],J.d]}),B),F=((X=function t(){_classCallCheck(this,t)}).\u0275mod=r.Mb({type:X}),X.\u0275inj=r.Lb({factory:function(t){return new(t||X)},imports:[[c.c,A,i.a]]}),X)}}]);