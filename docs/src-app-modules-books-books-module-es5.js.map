{"version":3,"sources":["webpack:///src/app/core/models/book.model.ts","webpack:///src/app/core/services/api.service.ts","webpack:///src/app/core/services/books.service.ts","webpack:///src/app/modules/books/books-routing.module.ts","webpack:///src/app/modules/books/books.module.ts","webpack:///src/app/modules/books/store/actions/search.actions.ts","webpack:///src/app/modules/books/store/actions/wishlist.actions.ts","webpack:///src/app/modules/books/store/effects/search.effects.ts","webpack:///src/app/modules/books/store/effects/wishlist.effects.ts","webpack:///src/app/modules/books/store/reducers/search.reducer.ts","webpack:///src/app/modules/books/store/reducers/wishlist.reducer.ts","webpack:///src/app/modules/books/store/selectors/wishlist.selectors.ts"],"names":["Book","id","title","description","thumbnailUrl","obj","volumeInfo","imageLinks","thumbnail","ApiService","http","error","url","params","get","pipe","formatErrors","path","body","headers","set","put","JSON","stringify","post","providedIn","BooksService","api","apiKey","apiUrl","query","startIndex","httpParams","toString","result","books","items","map","i","parse","totalItems","routes","redirectTo","loadChildren","then","m","SearchModule","WishlistModule","BooksRoutingModule","forChild","imports","exports","BooksModule","forFeature","declarations","searchBooks","searchBooksSuccess","searchBooksFailure","toggleSearchLoading","addToWishlist","addToWishlistSuccess","addToWishlistFailiure","removeFromWishlist","SearchEffects","actions$","booksService","store","searchBooks$","a","b","dispatch","isLoading","action","length","search","WishlistEffects","snackbar","addToWishlist$","select","wishlist","alreadyInWishlist","find","book","addToWishlistSuccess$","open","addToWishlistFail$","removeFromWishlist$","searchFeatureKey","initialState","loading","lastQuery","reducer","state","wishlistFeatureKey","push","indexToRemove","findIndex","splice","selectWishlistState"],"mappings":"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","file":"src-app-modules-books-books-module-es5.js","sourcesContent":["export class Book {\r\n  constructor(\r\n    public id: string,\r\n    public title: string,\r\n    public description: string,\r\n    public thumbnailUrl: string\r\n  ) {}\r\n\r\n  static parse(obj) {\r\n    return new Book(\r\n      obj.id,\r\n      obj.volumeInfo.title,\r\n      obj.volumeInfo.description,\r\n      obj.volumeInfo.imageLinks?.thumbnail\r\n    );\r\n  }\r\n}\r\n","import { HttpClient, HttpParams, HttpHeaders } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { throwError, Observable } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ApiService {\r\n  constructor(private http: HttpClient) {}\r\n\r\n  private formatErrors(error: any) {\r\n    return throwError(error.error);\r\n  }\r\n\r\n  get(url: string, params: HttpParams = new HttpParams()): Observable<any> {\r\n    return this.http.get(url, { params }).pipe(catchError(this.formatErrors));\r\n  }\r\n\r\n  put(path: string, body: Object = {}): Observable<any> {\r\n    const headers = new HttpHeaders().set('Content-Type', 'application/json');\r\n    return this.http\r\n      .put(path, JSON.stringify(body), { headers })\r\n      .pipe(catchError(this.formatErrors));\r\n  }\r\n\r\n  post(path: string, body: Object = {}): Observable<any> {\r\n    const headers = new HttpHeaders().set('Content-Type', 'application/json');\r\n    return this.http\r\n      .post(`${path}`, JSON.stringify(body), { headers })\r\n      .pipe(catchError(this.formatErrors));\r\n  }\r\n\r\n  delete(path): Observable<any> {\r\n    return this.http.delete(`${path}`).pipe(catchError(this.formatErrors));\r\n  }\r\n}\r\n","import { ApiService } from './api.service';\r\nimport { HttpParams } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { map } from 'rxjs/operators';\r\nimport { Book } from '../models/book.model';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class BooksService {\r\n  private apiKey = 'AIzaSyCegaZrlIyR4vBqwGAWJgeLlbYwTSige08';\r\n  private apiUrl = 'https://www.googleapis.com/books/v1/volumes';\r\n\r\n  constructor(private api: ApiService) {}\r\n\r\n  search(query: string, startIndex: number) {\r\n    let httpParams = new HttpParams()\r\n      .set('key', this.apiKey)\r\n      .set('q', query)\r\n      .set('maxResults', '20')\r\n      .set('startIndex', startIndex.toString());\r\n\r\n    return this.api.get(this.apiUrl, httpParams).pipe(\r\n      map((result) => {\r\n        const books = result.items?.map((i) => Book.parse(i));\r\n        const totalItems = result.totalItems;\r\n\r\n        return { books, totalItems, query };\r\n      })\r\n    );\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    redirectTo: 'search',\r\n  },\r\n  {\r\n    path: 'search',\r\n    loadChildren: () =>\r\n      import('src/app/modules/books/search/search.module').then(\r\n        (m) => m.SearchModule\r\n      ),\r\n  },\r\n  {\r\n    path: 'wishlist',\r\n    loadChildren: () =>\r\n      import('src/app/modules/books/wishlist/wishlist.module').then(\r\n        (m) => m.WishlistModule\r\n      ),\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class BooksRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { BooksRoutingModule } from './books-routing.module';\r\nimport { StoreModule } from '@ngrx/store';\r\nimport * as fromSearch from './store/reducers/search.reducer';\r\nimport { EffectsModule } from '@ngrx/effects';\r\nimport { SearchEffects } from './store/effects/search.effects';\r\nimport * as fromWishlist from './store/reducers/wishlist.reducer';\r\nimport { WishlistEffects } from './store/effects/wishlist.effects';\r\n\r\n@NgModule({\r\n  declarations: [],\r\n  imports: [\r\n    CommonModule,\r\n    BooksRoutingModule,\r\n    StoreModule.forFeature(fromSearch.searchFeatureKey, fromSearch.reducer),\r\n    EffectsModule.forFeature([SearchEffects, WishlistEffects]),\r\n    StoreModule.forFeature(\r\n      fromWishlist.wishlistFeatureKey,\r\n      fromWishlist.reducer\r\n    ),\r\n  ],\r\n})\r\nexport class BooksModule {}\r\n","import { createAction, props } from '@ngrx/store';\r\nimport { Book } from 'src/app/core/models/book.model';\r\n\r\nexport const searchBooks = createAction(\r\n  '[Search] Search Books',\r\n  props<{ query: string; startIndex: number }>()\r\n);\r\n\r\nexport const searchBooksSuccess = createAction(\r\n  '[Search] Search Books Success',\r\n  props<{ books: Book[]; totalItems: number; query: string }>()\r\n);\r\n\r\nexport const searchBooksFailure = createAction(\r\n  '[Search] Search Books Failure',\r\n  props<{ error: any }>()\r\n);\r\n\r\nexport const toggleSearchLoading = createAction(\r\n  '[Search] Toggle search loading',\r\n  props<{ isLoading: boolean }>()\r\n);\r\n","import { createAction, props } from '@ngrx/store';\r\nimport { Book } from 'src/app/core/models/book.model';\r\n\r\nexport const addToWishlist = createAction(\r\n  '[Wishlist] Add to wishlist',\r\n  props<{ book: Book }>()\r\n);\r\n\r\nexport const addToWishlistSuccess = createAction(\r\n  '[Wishlist] Add to wishlist Success',\r\n  props<{ book: Book }>()\r\n);\r\n\r\nexport const addToWishlistFailiure = createAction(\r\n  '[Wishlist] Add to wishlist Failiure',\r\n  props<{ book: Book }>()\r\n);\r\n\r\nexport const removeFromWishlist = createAction(\r\n  '[Wishlist] Remove from wishlist',\r\n  props<{ book: Book }>()\r\n);\r\n","import { BooksService } from './../../../../core/services/books.service';\r\nimport { Injectable } from '@angular/core';\r\nimport { Actions, createEffect, ofType } from '@ngrx/effects';\r\nimport {\r\n  catchError,\r\n  map,\r\n  concatMap,\r\n  switchMap,\r\n  debounceTime,\r\n  distinctUntilChanged,\r\n  pluck,\r\n  filter,\r\n  tap,\r\n  finalize,\r\n} from 'rxjs/operators';\r\nimport { EMPTY, of } from 'rxjs';\r\n\r\nimport * as SearchActions from '../actions/search.actions';\r\nimport { Store } from '@ngrx/store';\r\n\r\n@Injectable()\r\nexport class SearchEffects {\r\n  searchBooks$ = createEffect(() => {\r\n    return this.actions$.pipe(\r\n      ofType(SearchActions.searchBooks),\r\n      debounceTime(500),\r\n      distinctUntilChanged(\r\n        (a, b) => a.query === b.query && a.startIndex === b.startIndex\r\n      ),\r\n      tap(() =>\r\n        this.store.dispatch(\r\n          SearchActions.toggleSearchLoading({ isLoading: true })\r\n        )\r\n      ),\r\n      switchMap((action) => {\r\n        // No empty queries allowed by the api, reset the state\r\n        if (action.query.length === 0) {\r\n          return of(\r\n            SearchActions.searchBooksSuccess({\r\n              books: null,\r\n              totalItems: 0,\r\n              query: action.query,\r\n            })\r\n          );\r\n        }\r\n\r\n        return this.booksService.search(action.query, action.startIndex).pipe(\r\n          map((result) => SearchActions.searchBooksSuccess(result)),\r\n          catchError((error) => of(SearchActions.searchBooksFailure({ error })))\r\n        );\r\n      }),\r\n      tap(() =>\r\n        this.store.dispatch(\r\n          SearchActions.toggleSearchLoading({ isLoading: false })\r\n        )\r\n      )\r\n    );\r\n  });\r\n\r\n  constructor(\r\n    private actions$: Actions,\r\n    private booksService: BooksService,\r\n    private store: Store\r\n  ) {}\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Actions, createEffect, ofType } from '@ngrx/effects';\r\nimport {\r\n  catchError,\r\n  map,\r\n  concatMap,\r\n  tap,\r\n  withLatestFrom,\r\n  switchMap,\r\n} from 'rxjs/operators';\r\nimport { EMPTY, of } from 'rxjs';\r\n\r\nimport * as WishlistActions from '../actions/wishlist.actions';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { Store } from '@ngrx/store';\r\nimport { wishlist } from '../selectors/wishlist.selectors';\r\n\r\n@Injectable()\r\nexport class WishlistEffects {\r\n  addToWishlist$ = createEffect(() => {\r\n    return this.actions$.pipe(\r\n      ofType(WishlistActions.addToWishlist),\r\n      switchMap((action) =>\r\n        of(action).pipe(\r\n          withLatestFrom(this.store.select(wishlist)),\r\n          map(([action, wishlist]) => {\r\n            const alreadyInWishlist = wishlist?.find(\r\n              (b) => b.id === action.book.id\r\n            );\r\n            return alreadyInWishlist\r\n              ? WishlistActions.addToWishlistFailiure({ book: action.book })\r\n              : WishlistActions.addToWishlistSuccess({ book: action.book });\r\n          })\r\n        )\r\n      )\r\n    );\r\n  });\r\n\r\n  addToWishlistSuccess$ = createEffect(\r\n    () => {\r\n      return this.actions$.pipe(\r\n        ofType(WishlistActions.addToWishlistSuccess),\r\n        tap((action) =>\r\n          this.snackbar.open(action.book.title + ' added to the wishlist')\r\n        )\r\n      );\r\n    },\r\n    { dispatch: false }\r\n  );\r\n\r\n  addToWishlistFail$ = createEffect(\r\n    () => {\r\n      return this.actions$.pipe(\r\n        ofType(WishlistActions.addToWishlistFailiure),\r\n        tap((action) => {\r\n          return this.snackbar.open(\r\n            action.book.title + ' is already in the wishlist'\r\n          );\r\n        })\r\n      );\r\n    },\r\n    { dispatch: false }\r\n  );\r\n\r\n  removeFromWishlist$ = createEffect(\r\n    () => {\r\n      return this.actions$.pipe(\r\n        ofType(WishlistActions.removeFromWishlist),\r\n        tap((action) =>\r\n          this.snackbar.open(action.book.title + ' removed from the wishlist')\r\n        )\r\n      );\r\n    },\r\n    { dispatch: false }\r\n  );\r\n\r\n  constructor(\r\n    private actions$: Actions,\r\n    private snackbar: MatSnackBar,\r\n    private store: Store\r\n  ) {}\r\n}\r\n","import { Action, createReducer, on } from '@ngrx/store';\r\nimport { Book } from 'src/app/core/models/book.model';\r\nimport * as SearchActions from '../actions/search.actions';\r\n\r\nexport const searchFeatureKey = 'search';\r\n\r\nexport interface State {\r\n  loading: boolean;\r\n  books: Book[];\r\n  totalItems: number;\r\n\r\n  // Api is acting weird and changing 'totalItems' every query, so this helps persist 'totalItems\r\n  lastQuery: string;\r\n}\r\n\r\nexport const initialState: State = {\r\n  loading: false,\r\n  books: null,\r\n  totalItems: 0,\r\n  lastQuery: null,\r\n};\r\n\r\nexport const reducer = createReducer(\r\n  initialState,\r\n  on(SearchActions.toggleSearchLoading, (state, action) => ({\r\n    ...state,\r\n    loading: action.isLoading,\r\n  })),\r\n\r\n  on(SearchActions.searchBooks, (state, action) => ({\r\n    ...state,\r\n  })),\r\n  on(SearchActions.searchBooksSuccess, (state, action) => ({\r\n    ...state,\r\n    books: action.books,\r\n    lastQuery: action.query,\r\n    totalItems:\r\n      action.query != state.lastQuery ? action.totalItems : state.totalItems,\r\n  }))\r\n);\r\n","import { wishlist } from './../selectors/wishlist.selectors';\r\nimport { Action, createReducer, on } from '@ngrx/store';\r\nimport { Book } from 'src/app/core/models/book.model';\r\nimport * as WishlistActions from '../actions/wishlist.actions';\r\n\r\nexport const wishlistFeatureKey = 'wishlist';\r\n\r\nexport interface State {\r\n  wishlist: Book[];\r\n}\r\n\r\nexport const initialState: State = {\r\n  wishlist: [],\r\n};\r\n\r\nexport const reducer = createReducer(\r\n  initialState,\r\n\r\n  on(WishlistActions.addToWishlistSuccess, (state, action) => {\r\n    let wishlist = [...state.wishlist];\r\n    wishlist.push(action.book);\r\n    return { ...state, wishlist: wishlist };\r\n  }),\r\n\r\n  on(WishlistActions.removeFromWishlist, (state, action) => {\r\n    let wishlist = [...state.wishlist];\r\n    const indexToRemove = wishlist.findIndex((b) => b.id === action.book.id);\r\n    wishlist.splice(indexToRemove, 1);\r\n    return { ...state, wishlist: wishlist };\r\n  })\r\n);\r\n","import { createFeatureSelector, createSelector } from '@ngrx/store';\r\nimport * as fromWishlist from '../reducers/wishlist.reducer';\r\n\r\nexport const selectWishlistState = createFeatureSelector<fromWishlist.State>(\r\n  fromWishlist.wishlistFeatureKey\r\n);\r\n\r\nexport const wishlist = createSelector(\r\n  selectWishlistState,\r\n  (state) => state.wishlist\r\n);\r\n"]}