{"version":3,"sources":["./src/app/core/models/book.model.ts","./src/app/core/services/api.service.ts","./src/app/core/services/books.service.ts","./src/app/modules/books/books-routing.module.ts","./src/app/modules/books/books.module.ts","./src/app/modules/books/store/actions/search.actions.ts","./src/app/modules/books/store/actions/wishlist.actions.ts","./src/app/modules/books/store/effects/search.effects.ts","./src/app/modules/books/store/effects/wishlist.effects.ts","./src/app/modules/books/store/reducers/search.reducer.ts","./src/app/modules/books/store/reducers/wishlist.reducer.ts","./src/app/modules/books/store/selectors/wishlist.selectors.ts"],"names":[],"mappings":"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","file":"src-app-modules-books-books-module-es2015.js","sourcesContent":["export class Book {\r\n  constructor(\r\n    public id: string,\r\n    public title: string,\r\n    public description: string,\r\n    public thumbnailUrl: string\r\n  ) {}\r\n\r\n  static parse(obj) {\r\n    return new Book(\r\n      obj.id,\r\n      obj.volumeInfo.title,\r\n      obj.volumeInfo.description,\r\n      obj.volumeInfo.imageLinks?.thumbnail\r\n    );\r\n  }\r\n}\r\n","import { HttpClient, HttpParams, HttpHeaders } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { throwError, Observable } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ApiService {\r\n  constructor(private http: HttpClient) {}\r\n\r\n  private formatErrors(error: any) {\r\n    return throwError(error.error);\r\n  }\r\n\r\n  get(url: string, params: HttpParams = new HttpParams()): Observable<any> {\r\n    return this.http.get(url, { params }).pipe(catchError(this.formatErrors));\r\n  }\r\n\r\n  put(path: string, body: Object = {}): Observable<any> {\r\n    const headers = new HttpHeaders().set('Content-Type', 'application/json');\r\n    return this.http\r\n      .put(path, JSON.stringify(body), { headers })\r\n      .pipe(catchError(this.formatErrors));\r\n  }\r\n\r\n  post(path: string, body: Object = {}): Observable<any> {\r\n    const headers = new HttpHeaders().set('Content-Type', 'application/json');\r\n    return this.http\r\n      .post(`${path}`, JSON.stringify(body), { headers })\r\n      .pipe(catchError(this.formatErrors));\r\n  }\r\n\r\n  delete(path): Observable<any> {\r\n    return this.http.delete(`${path}`).pipe(catchError(this.formatErrors));\r\n  }\r\n}\r\n","import { ApiService } from './api.service';\r\nimport { HttpParams } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { map } from 'rxjs/operators';\r\nimport { Book } from '../models/book.model';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class BooksService {\r\n  private apiKey = 'AIzaSyCegaZrlIyR4vBqwGAWJgeLlbYwTSige08';\r\n  private apiUrl = 'https://www.googleapis.com/books/v1/volumes';\r\n\r\n  constructor(private api: ApiService) {}\r\n\r\n  search(query: string, startIndex: number) {\r\n    let httpParams = new HttpParams()\r\n      .set('key', this.apiKey)\r\n      .set('q', query)\r\n      .set('maxResults', '20')\r\n      .set('startIndex', startIndex.toString());\r\n\r\n    return this.api.get(this.apiUrl, httpParams).pipe(\r\n      map((result) => {\r\n        const books = result.items?.map((i) => Book.parse(i));\r\n        const totalItems = result.totalItems;\r\n\r\n        return { books, totalItems, query };\r\n      })\r\n    );\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    redirectTo: 'search',\r\n  },\r\n  {\r\n    path: 'search',\r\n    loadChildren: () =>\r\n      import('src/app/modules/books/search/search.module').then(\r\n        (m) => m.SearchModule\r\n      ),\r\n  },\r\n  {\r\n    path: 'wishlist',\r\n    loadChildren: () =>\r\n      import('src/app/modules/books/wishlist/wishlist.module').then(\r\n        (m) => m.WishlistModule\r\n      ),\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class BooksRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { BooksRoutingModule } from './books-routing.module';\r\nimport { StoreModule } from '@ngrx/store';\r\nimport * as fromSearch from './store/reducers/search.reducer';\r\nimport { EffectsModule } from '@ngrx/effects';\r\nimport { SearchEffects } from './store/effects/search.effects';\r\nimport * as fromWishlist from './store/reducers/wishlist.reducer';\r\nimport { WishlistEffects } from './store/effects/wishlist.effects';\r\n\r\n@NgModule({\r\n  declarations: [],\r\n  imports: [\r\n    CommonModule,\r\n    BooksRoutingModule,\r\n    StoreModule.forFeature(fromSearch.searchFeatureKey, fromSearch.reducer),\r\n    EffectsModule.forFeature([SearchEffects, WishlistEffects]),\r\n    StoreModule.forFeature(\r\n      fromWishlist.wishlistFeatureKey,\r\n      fromWishlist.reducer\r\n    ),\r\n  ],\r\n})\r\nexport class BooksModule {}\r\n","import { createAction, props } from '@ngrx/store';\r\nimport { Book } from 'src/app/core/models/book.model';\r\n\r\nexport const searchBooks = createAction(\r\n  '[Search] Search Books',\r\n  props<{ query: string; startIndex: number }>()\r\n);\r\n\r\nexport const searchBooksSuccess = createAction(\r\n  '[Search] Search Books Success',\r\n  props<{ books: Book[]; totalItems: number; query: string }>()\r\n);\r\n\r\nexport const searchBooksFailure = createAction(\r\n  '[Search] Search Books Failure',\r\n  props<{ error: any }>()\r\n);\r\n\r\nexport const toggleSearchLoading = createAction(\r\n  '[Search] Toggle search loading',\r\n  props<{ isLoading: boolean }>()\r\n);\r\n","import { createAction, props } from '@ngrx/store';\r\nimport { Book } from 'src/app/core/models/book.model';\r\n\r\nexport const addToWishlist = createAction(\r\n  '[Wishlist] Add to wishlist',\r\n  props<{ book: Book }>()\r\n);\r\n\r\nexport const addToWishlistSuccess = createAction(\r\n  '[Wishlist] Add to wishlist Success',\r\n  props<{ book: Book }>()\r\n);\r\n\r\nexport const addToWishlistFailiure = createAction(\r\n  '[Wishlist] Add to wishlist Failiure',\r\n  props<{ book: Book }>()\r\n);\r\n\r\nexport const removeFromWishlist = createAction(\r\n  '[Wishlist] Remove from wishlist',\r\n  props<{ book: Book }>()\r\n);\r\n","import { BooksService } from './../../../../core/services/books.service';\r\nimport { Injectable } from '@angular/core';\r\nimport { Actions, createEffect, ofType } from '@ngrx/effects';\r\nimport {\r\n  catchError,\r\n  map,\r\n  concatMap,\r\n  switchMap,\r\n  debounceTime,\r\n  distinctUntilChanged,\r\n  pluck,\r\n  filter,\r\n  tap,\r\n  finalize,\r\n} from 'rxjs/operators';\r\nimport { EMPTY, of } from 'rxjs';\r\n\r\nimport * as SearchActions from '../actions/search.actions';\r\nimport { Store } from '@ngrx/store';\r\n\r\n@Injectable()\r\nexport class SearchEffects {\r\n  searchBooks$ = createEffect(() => {\r\n    return this.actions$.pipe(\r\n      ofType(SearchActions.searchBooks),\r\n      debounceTime(500),\r\n      distinctUntilChanged(\r\n        (a, b) => a.query === b.query && a.startIndex === b.startIndex\r\n      ),\r\n      tap(() =>\r\n        this.store.dispatch(\r\n          SearchActions.toggleSearchLoading({ isLoading: true })\r\n        )\r\n      ),\r\n      switchMap((action) => {\r\n        // No empty queries allowed by the api, reset the state\r\n        if (action.query.length === 0) {\r\n          return of(\r\n            SearchActions.searchBooksSuccess({\r\n              books: null,\r\n              totalItems: 0,\r\n              query: action.query,\r\n            })\r\n          );\r\n        }\r\n\r\n        return this.booksService.search(action.query, action.startIndex).pipe(\r\n          map((result) => SearchActions.searchBooksSuccess(result)),\r\n          catchError((error) => of(SearchActions.searchBooksFailure({ error })))\r\n        );\r\n      }),\r\n      tap(() =>\r\n        this.store.dispatch(\r\n          SearchActions.toggleSearchLoading({ isLoading: false })\r\n        )\r\n      )\r\n    );\r\n  });\r\n\r\n  constructor(\r\n    private actions$: Actions,\r\n    private booksService: BooksService,\r\n    private store: Store\r\n  ) {}\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Actions, createEffect, ofType } from '@ngrx/effects';\r\nimport {\r\n  catchError,\r\n  map,\r\n  concatMap,\r\n  tap,\r\n  withLatestFrom,\r\n  switchMap,\r\n} from 'rxjs/operators';\r\nimport { EMPTY, of } from 'rxjs';\r\n\r\nimport * as WishlistActions from '../actions/wishlist.actions';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { Store } from '@ngrx/store';\r\nimport { wishlist } from '../selectors/wishlist.selectors';\r\n\r\n@Injectable()\r\nexport class WishlistEffects {\r\n  addToWishlist$ = createEffect(() => {\r\n    return this.actions$.pipe(\r\n      ofType(WishlistActions.addToWishlist),\r\n      switchMap((action) =>\r\n        of(action).pipe(\r\n          withLatestFrom(this.store.select(wishlist)),\r\n          map(([action, wishlist]) => {\r\n            const alreadyInWishlist = wishlist?.find(\r\n              (b) => b.id === action.book.id\r\n            );\r\n            return alreadyInWishlist\r\n              ? WishlistActions.addToWishlistFailiure({ book: action.book })\r\n              : WishlistActions.addToWishlistSuccess({ book: action.book });\r\n          })\r\n        )\r\n      )\r\n    );\r\n  });\r\n\r\n  addToWishlistSuccess$ = createEffect(\r\n    () => {\r\n      return this.actions$.pipe(\r\n        ofType(WishlistActions.addToWishlistSuccess),\r\n        tap((action) =>\r\n          this.snackbar.open(action.book.title + ' added to the wishlist')\r\n        )\r\n      );\r\n    },\r\n    { dispatch: false }\r\n  );\r\n\r\n  addToWishlistFail$ = createEffect(\r\n    () => {\r\n      return this.actions$.pipe(\r\n        ofType(WishlistActions.addToWishlistFailiure),\r\n        tap((action) => {\r\n          return this.snackbar.open(\r\n            action.book.title + ' is already in the wishlist'\r\n          );\r\n        })\r\n      );\r\n    },\r\n    { dispatch: false }\r\n  );\r\n\r\n  removeFromWishlist$ = createEffect(\r\n    () => {\r\n      return this.actions$.pipe(\r\n        ofType(WishlistActions.removeFromWishlist),\r\n        tap((action) =>\r\n          this.snackbar.open(action.book.title + ' removed from the wishlist')\r\n        )\r\n      );\r\n    },\r\n    { dispatch: false }\r\n  );\r\n\r\n  constructor(\r\n    private actions$: Actions,\r\n    private snackbar: MatSnackBar,\r\n    private store: Store\r\n  ) {}\r\n}\r\n","import { Action, createReducer, on } from '@ngrx/store';\r\nimport { Book } from 'src/app/core/models/book.model';\r\nimport * as SearchActions from '../actions/search.actions';\r\n\r\nexport const searchFeatureKey = 'search';\r\n\r\nexport interface State {\r\n  loading: boolean;\r\n  books: Book[];\r\n  totalItems: number;\r\n\r\n  // Api is acting weird and changing 'totalItems' every query, so this helps persist 'totalItems\r\n  lastQuery: string;\r\n}\r\n\r\nexport const initialState: State = {\r\n  loading: false,\r\n  books: null,\r\n  totalItems: 0,\r\n  lastQuery: null,\r\n};\r\n\r\nexport const reducer = createReducer(\r\n  initialState,\r\n  on(SearchActions.toggleSearchLoading, (state, action) => ({\r\n    ...state,\r\n    loading: action.isLoading,\r\n  })),\r\n\r\n  on(SearchActions.searchBooks, (state, action) => ({\r\n    ...state,\r\n  })),\r\n  on(SearchActions.searchBooksSuccess, (state, action) => ({\r\n    ...state,\r\n    books: action.books,\r\n    lastQuery: action.query,\r\n    totalItems:\r\n      action.query != state.lastQuery ? action.totalItems : state.totalItems,\r\n  }))\r\n);\r\n","import { wishlist } from './../selectors/wishlist.selectors';\r\nimport { Action, createReducer, on } from '@ngrx/store';\r\nimport { Book } from 'src/app/core/models/book.model';\r\nimport * as WishlistActions from '../actions/wishlist.actions';\r\n\r\nexport const wishlistFeatureKey = 'wishlist';\r\n\r\nexport interface State {\r\n  wishlist: Book[];\r\n}\r\n\r\nexport const initialState: State = {\r\n  wishlist: [],\r\n};\r\n\r\nexport const reducer = createReducer(\r\n  initialState,\r\n\r\n  on(WishlistActions.addToWishlistSuccess, (state, action) => {\r\n    let wishlist = [...state.wishlist];\r\n    wishlist.push(action.book);\r\n    return { ...state, wishlist: wishlist };\r\n  }),\r\n\r\n  on(WishlistActions.removeFromWishlist, (state, action) => {\r\n    let wishlist = [...state.wishlist];\r\n    const indexToRemove = wishlist.findIndex((b) => b.id === action.book.id);\r\n    wishlist.splice(indexToRemove, 1);\r\n    return { ...state, wishlist: wishlist };\r\n  })\r\n);\r\n","import { createFeatureSelector, createSelector } from '@ngrx/store';\r\nimport * as fromWishlist from '../reducers/wishlist.reducer';\r\n\r\nexport const selectWishlistState = createFeatureSelector<fromWishlist.State>(\r\n  fromWishlist.wishlistFeatureKey\r\n);\r\n\r\nexport const wishlist = createSelector(\r\n  selectWishlistState,\r\n  (state) => state.wishlist\r\n);\r\n"],"sourceRoot":"webpack:///"}