(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"+Pp2":function(t,e,s){"use strict";s.d(e,"a",(function(){return r})),s.d(e,"c",(function(){return o})),s.d(e,"b",(function(){return n})),s.d(e,"d",(function(){return c}));var i=s("kt0X");const r=Object(i.n)("[Search] Search Books",Object(i.s)()),o=Object(i.n)("[Search] Search Books Success",Object(i.s)()),n=Object(i.n)("[Search] Search Books Failure",Object(i.s)()),c=Object(i.n)("[Search] Toggle search loading",Object(i.s)())},Ipon:function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));var i=s("kt0X"),r=s("wbst");const o=Object(i.o)(r.b),n=Object(i.q)(o,t=>t.wishlist)},QmST:function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));class i{constructor(t,e,s,i){this.id=t,this.title=e,this.description=s,this.thumbnailUrl=i}static parse(t){var e;return new i(t.id,t.volumeInfo.title,t.volumeInfo.description,null===(e=t.volumeInfo.imageLinks)||void 0===e?void 0:e.thumbnail)}}},SJAo:function(t,e,s){"use strict";s.d(e,"b",(function(){return o})),s.d(e,"a",(function(){return n}));var i=s("kt0X"),r=s("+Pp2");const o="search",n=Object(i.p)({loading:!1,books:void 0,totalItems:0,lastQuery:void 0},Object(i.r)(r.d,(t,e)=>Object.assign(Object.assign({},t),{loading:e.isLoading})),Object(i.r)(r.a,(t,e)=>Object.assign({},t)),Object(i.r)(r.c,(t,e)=>Object.assign(Object.assign({},t),{books:e.books,lastQuery:e.query,totalItems:e.query!==t.lastQuery?e.totalItems:t.totalItems})))},"d7F/":function(t,e,s){"use strict";s.d(e,"a",(function(){return r})),s.d(e,"c",(function(){return o})),s.d(e,"b",(function(){return n})),s.d(e,"d",(function(){return c}));var i=s("kt0X");const r=Object(i.n)("[Wishlist] Add to wishlist",Object(i.s)()),o=Object(i.n)("[Wishlist] Add to wishlist Success",Object(i.s)()),n=Object(i.n)("[Wishlist] Add to wishlist Failiure",Object(i.s)()),c=Object(i.n)("[Wishlist] Remove from wishlist",Object(i.s)())},n2S4:function(t,e,s){"use strict";s.r(e),s.d(e,"BooksModule",(function(){return L}));var i=s("ofXK"),r=s("tyNb"),o=s("fXoL");const n=[{path:"",redirectTo:"search"},{path:"search",loadChildren:()=>s.e(7).then(s.bind(null,"5k4T")).then(t=>t.SearchModule)},{path:"wishlist",loadChildren:()=>s.e(8).then(s.bind(null,"kw8I")).then(t=>t.WishlistModule)}];let c=(()=>{class t{}return t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({factory:function(e){return new(e||t)},imports:[[r.d.forChild(n)],r.d]}),t})();var a=s("kt0X"),b=s("SJAo"),h=s("snw9"),u=s("Kj3r"),d=s("/uUt"),l=s("vkgz"),p=s("eIep"),j=s("lJxs"),O=s("JIr8"),f=s("LRne"),k=s("+Pp2"),w=s("tk/3"),m=s("QmST"),v=s("z6cu");let g=(()=>{class t{constructor(t){this.http=t}formatErrors(t){return Object(v.a)(t.error)}get(t,e=new w.d){return this.http.get(t,{params:e}).pipe(Object(O.a)(this.formatErrors))}put(t,e={}){const s=(new w.c).set("Content-Type","application/json");return this.http.put(t,JSON.stringify(e),{headers:s}).pipe(Object(O.a)(this.formatErrors))}post(t,e={}){const s=(new w.c).set("Content-Type","application/json");return this.http.post(""+t,JSON.stringify(e),{headers:s}).pipe(Object(O.a)(this.formatErrors))}delete(t){return this.http.delete(""+t).pipe(Object(O.a)(this.formatErrors))}}return t.\u0275fac=function(e){return new(e||t)(o.Yb(w.a))},t.\u0275prov=o.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),y=(()=>{class t{constructor(t){this.api=t,this.apiKey="AIzaSyCegaZrlIyR4vBqwGAWJgeLlbYwTSige08",this.apiUrl="https://www.googleapis.com/books/v1/volumes",this.RESULTS_PER_PAGE="20"}search(t,e){let s=(new w.d).set("key",this.apiKey).set("q",t).set("maxResults",this.RESULTS_PER_PAGE).set("startIndex",e.toString());return this.api.get(this.apiUrl,s).pipe(Object(j.a)(e=>{var s;return{books:null===(s=e.items)||void 0===s?void 0:s.map(t=>m.a.parse(t)),totalItems:e.totalItems,query:t}}))}}return t.\u0275fac=function(e){return new(e||t)(o.Yb(g))},t.\u0275prov=o.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),S=(()=>{class t{constructor(t,e,s){this.actions$=t,this.booksService=e,this.store=s,this.SEARCH_DEBOUNCE=500,this.searchBooks$=Object(h.c)(()=>this.actions$.pipe(Object(h.d)(k.a),Object(u.a)(this.SEARCH_DEBOUNCE),Object(d.a)((t,e)=>t.query===e.query&&t.startIndex===e.startIndex),Object(l.a)(()=>this.store.dispatch(k.d({isLoading:!0}))),Object(p.a)(t=>0===t.query.length?Object(f.a)(k.c({books:void 0,totalItems:0,query:t.query})):this.booksService.search(t.query,t.startIndex).pipe(Object(j.a)(t=>k.c(t)),Object(O.a)(t=>Object(f.a)(k.b({error:t}))))),Object(l.a)(()=>this.store.dispatch(k.d({isLoading:!1})))))}}return t.\u0275fac=function(e){return new(e||t)(o.Yb(h.a),o.Yb(y),o.Yb(a.h))},t.\u0275prov=o.Kb({token:t,factory:t.\u0275fac}),t})();var I=s("wbst"),E=s("zp1y"),T=s("d7F/"),q=s("Ipon"),$=s("dNgK");let A=(()=>{class t{constructor(t,e,s){this.actions$=t,this.snackbar=e,this.store=s,this.addToWishlist$=Object(h.c)(()=>this.actions$.pipe(Object(h.d)(T.a),Object(p.a)(t=>Object(f.a)(t).pipe(Object(E.a)(this.store.select(q.a)),Object(j.a)(([t,e])=>((null==e?void 0:e.find(e=>e.id===t.book.id))?T.b:T.c)({book:t.book})))))),this.addToWishlistSuccess$=Object(h.c)(()=>this.actions$.pipe(Object(h.d)(T.c),Object(l.a)(t=>this.snackbar.open(t.book.title+" added to the wishlist"))),{dispatch:!1}),this.addToWishlistFail$=Object(h.c)(()=>this.actions$.pipe(Object(h.d)(T.b),Object(l.a)(t=>this.snackbar.open(t.book.title+" is already in the wishlist"))),{dispatch:!1}),this.removeFromWishlist$=Object(h.c)(()=>this.actions$.pipe(Object(h.d)(T.d),Object(l.a)(t=>this.snackbar.open(t.book.title+" rmoved from the wishlist"))),{dispatch:!1})}}return t.\u0275fac=function(e){return new(e||t)(o.Yb(h.a),o.Yb($.b),o.Yb(a.h))},t.\u0275prov=o.Kb({token:t,factory:t.\u0275fac}),t})(),L=(()=>{class t{}return t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({factory:function(e){return new(e||t)},imports:[[i.c,c,a.j.forFeature(b.b,b.a),h.b.forFeature([S,A]),a.j.forFeature(I.b,I.a)]]}),t})()},wbst:function(t,e,s){"use strict";s.d(e,"b",(function(){return o})),s.d(e,"a",(function(){return n}));var i=s("kt0X"),r=s("d7F/");const o="wishlist",n=Object(i.p)({wishlist:[]},Object(i.r)(r.c,(t,e)=>{let s=[...t.wishlist];return s.push(e.book),Object.assign(Object.assign({},t),{wishlist:s})}),Object(i.r)(r.d,(t,e)=>{let s=[...t.wishlist];const i=s.findIndex(t=>t.id===e.book.id);return s.splice(i,1),Object.assign(Object.assign({},t),{wishlist:s})}))}}]);